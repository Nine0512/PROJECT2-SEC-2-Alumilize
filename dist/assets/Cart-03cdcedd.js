import{F as A}from"./Footer-ff294cad.js";import{g as B,_ as S}from"./Navbar-e7b9b4ed.js";import{e as F,u,r as m,o as g,c as f,g as v,l as k,t as n,a as e,h as d,F as b,i as $,p as E,d as N}from"./index-4c4220a9.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";const p=_=>(E("data-v-721c4f0a"),_=_(),N(),_),T={class:"w-full min-h-screen"},O={class:"bg-[#FEC4A2] text-black my-5 lg:mx-64 py-2 grid lg:grid-cols-4 max-[1100px]:grid-cols-3 md:grid-cols-4 max-[768px]:grid-cols-1 max-[768px]:justify-items-center max-[90px]:grid-cols-1 justify-between rounded-box place-items-center"},V={class:"flex flex-row whitespace-nowrap"},D={class:"flex flex-row justify-start pr-2.5"},R=p(()=>e("div",{class:"max-[1100px]:hidden"},"Information",-1)),H=p(()=>e("div",{class:"lg:ml-64 md:col-end-4 ml-6 max-[768px]:hidden"},"Price",-1)),J=p(()=>e("div",{class:"lg:ml-16 md:col-end-5 max-[1100px]:relative max-[768px]:hidden sm:ml-0"},"Remove",-1)),L={class:"bg-[#FEC4A2] text-black grid lg:grid-cols-6 md:grid-cols-4 py-3.5 place-items-center rounded-box"},M={class:"grid grid-cols-3 mr-2 sm:auto-rows-max"},U={class:"grid place-items-center"},q=["onClick"],z={class:"col-span-2"},G=["src","alt"],K={class:"lg:col-span-3 sm:auto-rows-max"},Q={class:"font-semibold lg:text-4xl md:text-2xl"},W=p(()=>e("p",{class:"text-xs max-[1100px]:hidden"},"Description",-1)),X={class:"font-semibold text-xs max-[1100px]:hidden"},Y={class:"lg:col-span-2 md:col-span-2 grid xl:grid-cols-2 md:grid-row-2 max-[1280px]:grid-rows-2 max-[768px]:grid-rows-2 max-[768px]:justify-items-center"},Z={class:"lg:pl-4"},ee={class:"font-semibold lg:text-4xl whitespace-nowrap md:text-2xl"},se=["onClick"],te=p(()=>e("button",{class:"btn"},null,-1)),oe=[te],le={class:"bg-[#FEC4A2] text-black my-5 lg:mx-64 pt-5 p-2 rounded-box place-items-center"},ce={class:"grid lg:grid-cols-6 md:grid-cols-2"},ie={class:"lg:col-end-6 lg:col-span-1 grid max-[768px]:grid-rows-2 max-[768px]:justify-items-center"},de={class:"lg:text-4xl md:text-2xl font-semibold grid justify-items-end whitespace-nowrap"},ae={class:"font-semibold grid justify-items-center whitespace-nowrap"},re={__name:"Cart",setup(_){F(async()=>{await B()});let y=u().userInformation.id,c=u().userInformation.cart,t=u().userInformation.bookId,i=m([]),a=m(0),x=m(null),h=m(null);console.log(typeof t);let w=o=>{let l=c.indexOf(o);l>-1&&c.splice(l,1)},C=(o,l)=>{h.value=o.target;let s=c.find(r=>r.id===l);h.value.checked?(a.value+=s.price,i.value.push(s),t?(t.push(s.id),i.value.pop(s)):(t=[],t.push(s.id))):(a.value-=s.price,t=t.filter(r=>r!==s.id))},I=()=>{for(let o=0;o<c.length;o++)x.value.checked?(a.value+=c[o].price,i.value.push(c[o]),t||(t=[]),t.push(c[o].id)):(a.value-=c[o].price,t=t.filter(l=>l!==c.id),i.value.pop(c[o]))},j=async()=>{await fetch(`http://localhost:5000/login/${y}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:t})});let o=new Set(i.value.map(({id:l})=>l));c=c.filter(({id:l})=>!o.has(l)),a.value=0,t=[],i.value=[],x.value.checked=!1};return(o,l)=>(g(),f(b,null,[v(S),k(" "+n()+" ",1),e("div",T,[e("div",O,[e("div",V,[e("div",D,[e("input",{type:"checkbox",class:"checkbox border border-black",onClick:l[0]||(l[0]=s=>d(I)()),ref_key:"outCheckedAll",ref:x},null,512)]),k(" Select All ")]),R,H,J]),(g(!0),f(b,null,$(d(c),s=>(g(),f("div",{key:s.id,class:"my-5 lg:mx-64"},[e("div",L,[e("div",M,[e("div",U,[e("input",{type:"checkbox",class:"checkbox border border-black",onClick:r=>d(C)(r,s.id),ref_for:!0,ref_key:"outChecked",ref:h},null,8,q)]),e("div",z,[e("img",{src:s.imageBase64,alt:s.title,class:"w-full"},null,8,G)])]),e("div",K,[e("p",Q,n(s.title),1),W,e("p",X,n(s.description),1)]),e("div",Y,[e("div",Z,[e("p",ee,"Price: "+n(s.price)+" $",1)]),e("div",{class:"lg:ml-16",onClick:r=>d(w)(s)},oe,8,se)])])]))),128)),e("div",le,[e("div",ce,[e("div",ie,[e("div",de," Total: "+n(d(a))+" $ ",1),e("div",ae," ("+n(d(i).length)+" piece) ",1)]),e("div",{class:"lg:col-end-7 lg:col-span-1 card font-semibold btn btn-ghost whitespace-nowrap",onClick:l[1]||(l[1]=s=>d(j)())}," Purchase ")])])]),v(A)],64))}},xe=P(re,[["__scopeId","data-v-721c4f0a"]]);export{xe as default};

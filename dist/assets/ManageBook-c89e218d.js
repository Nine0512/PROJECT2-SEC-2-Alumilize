import{s as P,r as u,e as R,o as i,c as d,a as e,w as c,m as p,h as s,y as $,F,i as N,q as O,k as v,t as T,n as x}from"./index-4c4220a9.js";const J={class:"w-full min-h-screen flex justify-center"},M={class:"w-full lg:w-4/6 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 pt-10"},E={class:"col-span-3"},I=e("h3",{class:"font-bold text-lg"},"Book info",-1),W={class:"my-5"},q={class:"form-control w-5/6 max-w-xs"},z=e("label",{class:"label"},[e("span",{class:"label-text"},"Title")],-1),G={class:"form-control w-5/6 max-w-xs"},H=e("label",{class:"label"},[e("span",{class:"label-text"},"Author")],-1),K={class:"form-control w-5/6 max-w-xs"},Q=e("label",{class:"label"},[e("span",{class:"label-text"},"Price")],-1),X={class:"form-control w-5/6 max-w-xs"},Y=e("label",{class:"label"},[e("span",{class:"label-text"},"Print Length")],-1),Z={class:"form-control w-5/6 max-w-xs"},ee=e("label",{class:"label"},[e("span",{class:"label-text"},"Language")],-1),le=e("option",{disabled:"",selected:""},"What language of your book?",-1),te=e("option",null,"Thai",-1),se=e("option",null,"English",-1),ae=e("option",null,"Japanese",-1),oe=e("option",null,"German",-1),ne=e("option",null,"French",-1),ie=[le,te,se,ae,oe,ne],de={class:"form-control w-5/6 max-w-xs"},re=e("label",{class:"label"},[e("span",{class:"label-text"},"Publisher")],-1),ce={class:"form-control w-5/6 max-w-xs"},ue=e("label",{class:"label"},[e("span",{class:"label-text"},"Published Date")],-1),pe={class:"form-control w-5/6 max-w-xs"},he=e("label",{class:"label"},[e("span",{class:"label-text"},"Description")],-1),ge={class:"w-full"},_e=e("label",{class:"label"},[e("span",{class:"label-text"},"Category")],-1),be={class:"grid grid-cols-2"},me={class:"form-control md:w-full"},fe={class:"label cursor-pointer px-5"},ve={class:"label-text"},xe=["onClick","checked"],ye=["onClick"],we={class:"col-span-3"},ke=e("h3",{class:"font-bold text-lg"},"Preview Image",-1),Ce=["src"],Ue={class:"col-span-6 grid grid-cols-2 w-full"},De={class:"flex flex-col justify-start"},Te={key:0,class:"text-red-500"},je={class:"flex justify-end modal-action"},Be=["for"],Ve={__name:"ManageBook",setup(Le){let j=P();const f=u(null);let h;u([]);let g=u(""),B=u(["Art","Design","Photography","Programming","Science","Technology"]),L=[".png",".jpg",".jpeg",".gif",".svg"],_=u(""),y=j.params.id,l=u({}),b=u("Add");R(async()=>{y===void 0?(b.value="Add",l.value={title:"",author:"",price:"",printLength:"",language:"",publisher:"",publishedDate:"",date:new Date().toLocaleDateString(),description:"",category:[],imageBase64:""}):(b.value="Update",fetch(`http://localhost:5000/Book/${y}`).then(o=>o.json()).then(o=>{var t;l.value=o,g.value=(t=l.value)==null?void 0:t.imageBase64}))});const S=o=>{console.log(o.target.files[0].name),L.some(t=>o.target.files[0].name.endsWith(t))?(_.value="",f.value=o.target.files[0],g.value=URL.createObjectURL(o.target.files[0])):(g.value="",_.value="Please upload file with extension .png, .jpg, .jpeg, .gif, .svg")},w=async()=>{var o,t,a,r,n,m,C,U,D;return((o=l.value)==null?void 0:o.title)===""||((t=l.value)==null?void 0:t.author)===""||((a=l.value)==null?void 0:a.price)===""||((r=l.value)==null?void 0:r.description)===""||((n=l.value)==null?void 0:n.category.length)===0||((m=l.value)==null?void 0:m.printLength)===""||((C=l.value)==null?void 0:C.language)===""||((U=l.value)==null?void 0:U.publishedDate)===""||((D=l.value)==null?void 0:D.publisher)===""||f.value===null?(_.value="Please fill all the field",!1):(_.value="",h=new FileReader,h.onload=A=>{l.value.imageBase64=A.target.result,fetch(" http://localhost:5000/Book",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(l.value)}).then(()=>x.go(-1))},h.readAsDataURL(f.value),!0)},V=async o=>{h=new FileReader,l.value.date=new Date().toLocaleDateString(),f.value?(h.onload=t=>{l.value.imageBase64=t.target.result,fetch(`http://localhost:5000/Book/${o}`,{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(l.value)}).then(()=>x.go(-1))},h.readAsDataURL(f.value)):fetch(`http://localhost:5000/Book/${o}`,{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(l.value)}).then(()=>x.go(-1))};let k=o=>{var t,a,r;(t=l.value)!=null&&t.category.some(n=>n===o)?l.value.category=(a=l.value)==null?void 0:a.category.filter(n=>n!==o):(r=l.value)==null||r.category.push(o)};return(o,t)=>(i(),d("div",J,[e("div",M,[e("div",E,[I,e("div",W,[e("div",q,[z,c(e("input",{type:"text",placeholder:"Type here",class:"input input-bordered w-full max-w-xs","onUpdate:modelValue":t[0]||(t[0]=a=>s(l).title=a)},null,512),[[p,s(l).title]])]),e("div",G,[H,c(e("input",{type:"text",placeholder:"Type here",class:"input input-bordered w-full max-w-xs","onUpdate:modelValue":t[1]||(t[1]=a=>s(l).author=a)},null,512),[[p,s(l).author]])]),e("div",K,[Q,c(e("input",{type:"number",placeholder:"Type here",class:"input input-bordered w-full max-w-xs","onUpdate:modelValue":t[2]||(t[2]=a=>s(l).price=a)},null,512),[[p,s(l).price]])]),e("div",X,[Y,c(e("input",{type:"number",placeholder:"Type here",class:"input input-bordered w-full max-w-xs","onUpdate:modelValue":t[3]||(t[3]=a=>s(l).printLength=a)},null,512),[[p,s(l).printLength]])]),e("div",Z,[ee,c(e("select",{class:"select select-bordered w-full max-w-xs","onUpdate:modelValue":t[4]||(t[4]=a=>s(l).language=a)},ie,512),[[$,s(l).language]])]),e("div",de,[re,c(e("input",{type:"text",placeholder:"Type here",class:"input input-bordered w-full max-w-xs","onUpdate:modelValue":t[5]||(t[5]=a=>s(l).publisher=a)},null,512),[[p,s(l).publisher]])]),e("div",ce,[ue,c(e("input",{type:"date",placeholder:"Type here",class:"input input-bordered w-full max-w-xs","onUpdate:modelValue":t[6]||(t[6]=a=>s(l).publishedDate=a)},null,512),[[p,s(l).publishedDate]])]),e("div",pe,[he,c(e("textarea",{class:"textarea textarea-bordered h-24",placeholder:"Type here","onUpdate:modelValue":t[7]||(t[7]=a=>s(l).description=a)},null,512),[[p,s(l).description]])]),e("div",ge,[_e,e("div",be,[(i(!0),d(F,null,N(s(B),a=>{var r,n;return i(),d("div",{key:a,class:"my-3"},[e("div",me,[e("label",fe,[e("span",ve,T(a),1),s(b)==="Update"?(i(),d("input",{key:0,type:"checkbox",class:"checkbox",onClick:m=>s(k)(a),checked:(n=(r=s(l))==null?void 0:r.category)==null?void 0:n.some(m=>m===a)},null,8,xe)):v("",!0),s(b)==="Add"?(i(),d("input",{key:1,type:"checkbox",class:"checkbox",onClick:m=>s(k)(a)},null,8,ye)):v("",!0)])])])}),128))])])])]),e("div",we,[ke,e("div",{class:O(["w-full bg-gray-300 rounded-xl p-10 mt-5",s(g)?"":"h-5/6"])},[s(g)?(i(),d("img",{key:0,src:s(g),alt:"selected Image"},null,8,Ce)):v("",!0)],2)]),e("div",Ue,[e("div",De,[s(_)?(i(),d("p",Te,T(s(_)),1)):v("",!0),e("input",{type:"file",class:"file-input",onChange:S},null,32)]),e("div",je,[s(b)==="Add"?(i(),d("label",{key:0,for:w?"":"my-modal",class:"btn",onClick:w},"Submit",8,Be)):s(b)==="Update"?(i(),d("label",{key:1,for:"my-modal",class:"btn",onClick:t[8]||(t[8]=a=>V(s(y)))},"Update")):v("",!0),e("button",{class:"btn",onClick:t[9]||(t[9]=a=>s(x).go(-1))},"Cancel")])])])]))}};export{Ve as default};
